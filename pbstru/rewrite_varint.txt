bool rewrite_varint(BYTE *buf, int varint_length, int new_value){
    int i;
    BYTE new_buf[20];
    int offset = 0;
    encode_varint(new_value, new_buf, &offset);
    if(offset > varint_length){
        return false;
    }
    memcpy(buf, new_buf, offset);
    if(offset < varint_length) {
        buf[offset-1] |= 0x80;
        for (i = offset; i < varint_length; ++i) {
            buf[i] = 0;
        }
    }
    return true;
}
